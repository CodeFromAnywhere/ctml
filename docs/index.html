<html>
  <head>
    <title>Hello world</title>
    <link rel="stylesheet" href="css.css" />
    <script>
      //  @ts-check

      // useful little script to ensure the page refreshes when we go there again.
      // especially useful as "devmode"
      window.onblur = function () {
        window.onfocus = function () {
          window.location = self.location;
        };
      };
    </script>
    <script>
      const closeMenu = () => {
        document
          .getElementById('menu')
          ?.style.setProperty('visibility', 'hidden');
        document.getElementById('open-menu')?.removeAttribute('style');
        localStorage.setItem('isMenuHidden', 'true');
      };

      const openMenu = () => {
        document
          .getElementById('menu')
          ?.style.setProperty('visibility', 'visible');
        document
          .getElementById('open-menu')
          ?.style.setProperty('visibility', 'hidden');
        localStorage.removeItem('isMenuHidden');
      };

      window.onload = () => {
        console.log(localStorage.getItem('isMenuHidden'));
        if (localStorage.getItem('isMenuHidden')) {
          closeMenu();
        }
      };
    </script>
  </head>

  <body
    style="
      margin: 0;
      font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande',
        'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
    "
  >
    <html>
      <head></head>
      <body>
        <nav
          id="menu"
          style="
            margin: 0;
            padding: 0;
            width: 25%;
            display: block;
            background-color: #404040;
            position: fixed;
            height: 100%;
            overflow: auto;
          "
        >
          <div
            style="
              display: flex;
              flex: 1;
              flex-direction: row;
              justify-content: space-between;
              align-items: center;
            "
          >
            <div style="flex: auto; flex-direction: row; padding: 10px">
              <img
                id="discord"
                onclick="
//@ts-check

alert('We have no community yet. If you feel like this deserves a discord... Let me know.'); 
document.getElementById('discord')?.remove();

// document.getElementById('discord').setAttribute('style','background-color: aqua;');

      "
                src="discord.svg"
                width="40"
                height="40"
              />

              <a href="https://github.com/CodeFromAnywhere/ctml"
                ><img src="github.svg" width="40" height="40"
              /></a>
            </div>

            <span
              style="color: white; font-size: 32px; cursor: pointer"
              onclick="closeMenu()"
              >&nbsp;X&nbsp;</span
            >
          </div>

          <ul style="list-style-type: none; margin: 0; padding: 0">
            <span>
              <a style="text-decoration: none" title="Home" href="index.html">
                <li class="menu-item" style="padding: 10px; color: #ffffff">
                  Home
                </li>
              </a>
            </span>

            <span>
              <a
                style="text-decoration: none"
                title="Walkthrough"
                href="walkthrough.html"
              >
                <li class="menu-item" style="padding: 10px; color: #ffffff">
                  Walkthrough
                </li>
              </a>
            </span>

            <span>
              <a style="text-decoration: none" title="Roadmap" href="todo.html">
                <li class="menu-item" style="padding: 10px; color: #ffffff">
                  Roadmap
                </li>
              </a>
            </span>

            <p>
              <b style="padding: 10px; color: #cccccc">Concepts</b>
            </p>
            <span>
              <a
                style="text-decoration: none"
                title="Serving"
                href="serving.html"
              >
                <li class="menu-item" style="padding: 10px; color: #ffffff">
                  Serving
                </li>
              </a>
            </span>

            <span>
              <a style="text-decoration: none" title="State" href="state.html">
                <li class="menu-item" style="padding: 10px; color: #ffffff">
                  State
                </li>
              </a>
            </span>

            <span>
              <a
                style="text-decoration: none"
                title="Actions"
                href="actions.html"
              >
                <li class="menu-item" style="padding: 10px; color: #ffffff">
                  Actions
                </li>
              </a>
            </span>
          </ul>
        </nav>
        <style>
          .menu-item:hover {
            background-color: darkblue;
          }

          .menu-item:active {
            background-color: darkgreen;
          }
        </style>
      </body>
    </html>

    <div style="margin-left: 25%; padding: 1px 32px; height: 1000px">
      <a
        id="open-menu"
        style="visibility: hidden"
        href="#open-menu"
        onclick="openMenu();"
        >Open Menu</a
      >

      <h1 style="color: brown">~~~ CTML: Component-driven HTML ~~~</h1>

      <h1 id="helloworld">Hello world</h1>
      <p>
        How are you doing. This is ctml. ctml stands for component-driven html
        and aims to simplify boilerplate and dx for edge websites.
      </p>
      <p>
        I don't know yet exactly where I want to go with this. ctml could be
        component driven html with as little boilerplate as possible.
      </p>
      <p>
        Something like mdx but i don't want to need a server. It should build to
        html quickly, but I want to be in control of how it looks.
      </p>
      <p>
        What if it would support md, js, ts, json, csv, xml, all out of the box?
        That would be pretty cool.
      </p>
      <p><em>Here you can see an overview:</em></p>
      <p><img src="./overview.drawio.png" alt="overview" /></p>
      <h1 id="story">Story</h1>
      <p>
        When I was 10 years old and learned html, I always wondered why I
        couldn't create my own elements, or add properties.
      </p>
      <p>
        Much later I learned React and saw that Facebook made it possible. But
        at what cost? JS Fatigue. JS solves all problems, but it comes at a
        cost: complexity.
      </p>
      <p>
        That's why I wanted to give this a go: a more intuitive simplistic way
        to write full-stack apps.
      </p>
      <p>
        I don't know if it will work, but the idea is simple: avoid javascript
        at all cost, write as much as possible in component-driven html,
        markdown, and datafiles like csv and json.
      </p>
      <p>Design Goals:</p>
      <ul>
        <li>
          Supercharge raw html, md, and data-files as much as possible. No fancy
          languages needed.
        </li>
        <li>Minimise source token size</li>
        <li>
          LoB: Locality of Behavior for increased comprehension (Read more
          <a href="https://htmx.org/essays/locality-of-behaviour/">here</a> and
          <a href="https://www.dreamsongs.com/Files/PatternsOfSoftware.pdf"
            >here</a
          >)
        </li>
        <li>Build an AI friendly internet</li>
        <li>
          Having fun building a personal website in a language no-one knows
        </li>
      </ul>
      <p>Let me know if you like it. :D</p>
      <h1 id="parsingrules">Parsing Rules</h1>
      <ol>
        <li>html is holy. All html tags are reserved.</li>
        <li>
          overwriting an html tag can be done in order to make it act
          differently everywhere, for example if you want to apply a style.
        </li>
        <li>
          every tag that is not official html refers to (and will 'include') the
          closest filename that has the same name as the tag, regardless of its
          extension
        </li>
        <li>
          you can specify the extension in the tagname if you want to be
          explicit but by default, the priority order is used: htm, json, md,
          ts, js. html is never included as it is the extension used after
          parsing.
        </li>
        <li>
          variables can be used with <code>${variable}</code> syntax (like in
          js) and can be passed into html tags as its attributes.
        </li>
        <li>
          included markdown is parsed to html. markdown can also use html and
          ctml
        </li>
        <li>
          inluded json is mapped if an array, and its object properties become
          available as variables (item is main value if it's not an object). csv
          is also a first-class citizen and works the same.
        </li>
      </ol>

      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
    </div>
  </body>
</html>
